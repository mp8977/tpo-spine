<% if admin_signed_in? %>
  <h2>Sifranti</h2>

  <div class="izberi-sifrante">
    <select class="js-example-basic-single">
      <option></option>
      <option value="Users">Uporabnik</option>
      <option value="Doctors">Zdravniki</option>
      <option value="Nurses">Medicinske sestre</option>
      <option value="Illnesses">Bolezni</option>
      <option value="Medicines">Zdravila</option>
      <option value="Hospitals">Izvajalci zdravstvenih storitev</option>
      <option value="Measurements">Meritve</option>


    </select>
  </div>

  <script type="text/javascript">
    $("document").ready( function(){
      $(".js-example-basic-single").select2().change( pokaziIzbiro);
    });

    function pokaziIzbiro() {
      $('.panel').remove();
      $('.show-table').append("<div class='panel panel-info'>" +
      "<div class='panel panel-info'><table class='table' id='show-data'></table></div></div>");
      $('a.add-new-button').remove();
      $('#show-data').html("");
      var izbira = $( ".js-example-basic-single option:selected" ).val();
      if (izbira == "Users") {
        $('#show-data').append('<thead><tr><td class="column-name">ID</td><td class="column-name">Email</td><td class="column-name">Izbrisan</td></tr></thead>');

        $.ajax({
          url: "/users.json",
          dataType: "json",
          type: "GET",
          success: function(json) {
            //console.log(JSON.stringify(json));
            var trHTML = '';
            $.each(json, function (index, user) {
              trHTML += '<tbody><tr>';
              trHTML += '<td>' + user.id + '</td>';
              trHTML += '<td>' + user.email + '</td>';
              trHTML += '<td>' + user.deleted + '</td>';
              trHTML += "<td align='right'><a class='btn btn-danger btn-xs' data-confirm='Ali ste prepricani?' data-method='delete' href='/users/" + user.id + "'>Izbrisi uporabnika</a>";
              trHTML += '</tr></tbody>';
            });
            $('#show-data').append(trHTML);
          }
        });
      }
      else if (izbira == "Doctors") {
        $('#show-data').append('<thead><tr><td class="column-name">ID</td><td class="column-name">Email</td><td class="column-name">Ime</td><td class="column-name">Priimek</td><td class="column-name">Sifra</td><td class="column-name">Kategorija</td><td class="column-name">Telefon</td><td class="column-name">Izbrisan</td></tr></thead>');

        $.ajax({
          url: "/doctors.json",
          dataType: "json",
          type: "GET",
          success: function(json) {
            //console.log(JSON.stringify(json));
            var trHTML = '';
            $.each(json, function (index, doctor) {
              trHTML += '<tbody><tr>';
              trHTML += '<td>' + doctor.id + '</td>';
              trHTML += '<td>' + doctor.email + '</td>';
              trHTML += '<td>' + doctor.firstName + '</td>';
              trHTML += '<td>' + doctor.lastName + '</td>';
              trHTML += '<td>' + doctor.doctorNumber + '</td>';
              trHTML += '<td>' + doctor.category + '</td>';
              trHTML += '<td>' + doctor.phone + '</td>';
              trHTML += '<td>' + doctor.deleted + '</td>';
              trHTML += "<td align='right'>" +
                  "<a class='btn btn-info btn-xs right-padding-link' href='/doctors/" + doctor.id + "/edit'>Uredi profil</a>" +
                  "<a class='btn btn-danger btn-xs' data-confirm='Ali ste prepricani?' data-method='delete' href='/doctors/" + doctor.id + "'>Izbrisi</a>";
              trHTML += '</tr></tbody>';
            });
            $('#show-data').append(trHTML);
            var new_button = $("<a class='btn btn-info add-new-button' href='/doctors/sign_up'>Registriraj zdravnika</a>");
            $('.profile-content').append(new_button);
          }
        });
      }
      else if (izbira == "Nurses") {
        $('#show-data').append('<thead><tr><td class="column-name">ID</td><td class="column-name">Email</td><td class="column-name">Ime</td><td class="column-name">Priimek</td><td class="column-name">Sifra</td><td class="column-name">Telefon</td><td class="column-name">Izbrisan</td></tr></thead>');

        $.ajax({
          url: "/nurses.json",
          dataType: "json",
          type: "GET",
          success: function(json) {
            //console.log(JSON.stringify(json));
            var trHTML = '';
            $.each(json, function (index, nurse) {
              trHTML += '<tbody><tr>';
              trHTML += '<td>' + nurse.id + '</td>';
              trHTML += '<td>' + nurse.email + '</td>';
              trHTML += '<td>' + nurse.firstName + '</td>';
              trHTML += '<td>' + nurse.lastName + '</td>';
              trHTML += '<td>' + nurse.nurseNumber + '</td>';
              trHTML += '<td>' + nurse.phone + '</td>';
              trHTML += '<td>' + nurse.deleted + '</td>';
              trHTML += "<td align='right'>" +
                  "<a class='btn btn-info btn-xs right-padding-link' href='/nurses/" + nurse.id + "/edit'>Uredi profil</a>" +
                  "<a class='btn btn-danger btn-xs' data-confirm='Ali ste prepricani?' data-method='delete' href='/nurses/" + nurse.id + "'>Izbrisi</a>";
              trHTML += '</tr></tbody>';
            });
            $('#show-data').append(trHTML);
            var new_button = $("<a class='btn btn-info add-new-button' href='/nurses/sign_up'>Registriraj medicinsko sestro</a>");
            $('.profile-content').append(new_button);
          }
        });
      }
      else if (izbira == "Illnesses") {
        $('#show-data').append('<thead><tr><td class="column-name">ID</td><td class="column-name">Sifra</td><td class="column-name">Ime</td><td class="column-name">Alergija</td><td class="column-name">Izbrisana</td></tr></thead>');

        $.ajax({
          url: "/illnesses.json",
          dataType: "json",
          type: "GET",
          success: function(json) {
            console.log(JSON.stringify(json));
            var trHTML = '';
            $.each(json, function (index, illness) {
              trHTML += '<tbody><tr>';
              trHTML += '<td>' + illness.id + '</td>';
              trHTML += '<td>' + illness.illnessNumber + '</td>';
              trHTML += '<td>' + illness.name + '</td>';
              trHTML += '<td>' + illness.isAllergy + '</td>';
              trHTML += '<td>' + illness.deleted + '</td>';
              trHTML += "<td align='right'>" +
                  "<a class='btn btn-info btn-xs right-padding-link' href='/illnesses/" + illness.id + "/edit'>Uredi</a>" +
                  "<a class='btn btn-danger btn-xs' data-confirm='Ali ste prepricani?' data-method='delete' href='/illnesses/" + illness.id + "'>Izbrisi</a>";
              trHTML += '</tr></tbody>';
            });
            $('#show-data').append(trHTML);
            var new_button = $("<a class='btn btn-info add-new-button' href='/illnesses/new'>Dodaj bolezen</a>");
            $('.profile-content').append(new_button);
          }
        });
      }
      else if (izbira == "Medicines") {
        $('#show-data').append('<thead><tr><td class="column-name">ID</td><td class="column-name">Sifra</td><td class="column-name">Ime</td><td class="column-name">V uporabi</td></tr></thead>');

        $.ajax({
          url: "/medicines.json",
          dataType: "json",
          type: "GET",
          success: function(json) {
            console.log(JSON.stringify(json));
            var trHTML = '';
            $.each(json, function (index, medicine) {
              trHTML += '<tbody><tr>';
              trHTML += '<td>' + medicine.id + '</td>';
              trHTML += '<td>' + medicine.medicineNumber + '</td>';
              trHTML += '<td>' + medicine.name + '</td>';
              trHTML += '<td>' + medicine.inUse + '</td>';
              trHTML += "<td align='right'>" +
                  "<a class='btn btn-info btn-xs right-padding-link' href='/medicines/" + medicine.id + "/edit'>Uredi</a>" +
                  "<a class='btn btn-danger btn-xs' data-confirm='Ali ste prepricani?' data-method='delete' href='/medicines/" + medicine.id + "'>Izbrisi</a>";
              trHTML += '</tr></tbody>';
            });
            $('#show-data').append(trHTML);
            var new_button = $("<a class='btn btn-info add-new-button' href='/medicines/new'>Dodaj zdravilo</a>");
            $('.profile-content').append(new_button);
          }
        });
      }
      else if (izbira == "Diets") {
        $('#show-data').append('<thead><tr><td class="column-name">ID</td><td class="column-name">Sifra</td><td class="column-name">Ime</td><td class="column-name">Deleted</td></tr></thead>');

        $.ajax({
          url: "/diets.json",
          dataType: "json",
          type: "GET",
          success: function(json) {
            console.log(JSON.stringify(json));
            var trHTML = '';
            $.each(json, function (index, diet) {
              trHTML += '<tbody><tr>';
              trHTML += '<td>' + diet.id + '</td>';
              trHTML += '<td>' + diet.dietNumber + '</td>';
              trHTML += '<td>' + diet.name + '</td>';
              trHTML += '<td>' + diet.deleted + '</td>';
              trHTML += "<td align='right'>" +
                  "<a class='btn btn-info btn-xs right-padding-link' href='/diets/" + diet.id + "/edit'>Uredi</a>" +
                  "<a class='btn btn-danger btn-xs' data-confirm='Ali ste prepricani?' data-method='delete' href='/diets/" + diet.id + "'>Izbrisi</a>";
              trHTML += '</tr></tbody>';
            });
            $('#show-data').append(trHTML);
            var new_button = $("<a class='btn btn-info add-new-button' href='/diets/new'>Dodaj dieto</a>");
            $('.profile-content').append(new_button);
          }
        });
      }
      else if (izbira == "Hospitals") {
        $('#show-data').append('<thead><tr><td class="column-name">ID</td><td class="column-name">Sifra</td><td class="column-name">Ime</td><td class="column-name">Deleted</td></tr></thead>');

        $.ajax({
          url: "/hospitals.json",
          dataType: "json",
          type: "GET",
          success: function(json) {
            console.log(JSON.stringify(json));
            var trHTML = '';
            $.each(json, function (index, hospital) {
              trHTML += '<tbody><tr>';
              trHTML += '<td>' + hospital.id + '</td>';
              trHTML += '<td>' + hospital.hospitalNumber + '</td>';
              trHTML += '<td>' + hospital.hospitalName + '</td>';
              trHTML += '<td>' + hospital.deleted + '</td>';
              trHTML += "<td align='right'>" +
                  "<a class='btn btn-info btn-xs right-padding-link' href='/hospitals/" + hospital.id + "/edit'>Uredi</a>" +
                  "<a class='btn btn-danger btn-xs' data-confirm='Ali ste prepricani?' data-method='delete' href='/hospitals/" + hospital.id + "'>Izbrisi</a>";
              trHTML += '</tr></tbody>';
            });
            $('#show-data').append(trHTML);
            var new_button = $("<a class='btn btn-info add-new-button' href='/hospitals/new'>Dodaj izvajalca</a>");
            $('.profile-content').append(new_button);
          }
        });
      }
      else if (izbira == "Measurements") {
        $('#show-data').append('<thead><tr><td class="column-name">ID</td><td class="column-name">Datum</td><td class="column-name">Deleted</td></tr></thead>');

        $.ajax({
          url: "/measurements.json",
          dataType: "json",
          type: "GET",
          success: function(json) {
            console.log(JSON.stringify(json));
            var trHTML = '';
            $.each(json, function (index, measurement) {
              trHTML += '<tbody><tr>';
              trHTML += '<td>' + measurement.id + '</td>';
              <!-- TODO spremeni format datuma, tako kot pri vpisu vlog -->
              trHTML += '<td>' + measurement.date + '</td>';
              trHTML += '<td>' + measurement.deleted + '</td>';
              trHTML += "<td align='right'>" +
                  "<a class='btn btn-info btn-xs right-padding-link' href='/measurements/" + measurement.id + "/edit'>Uredi</a>" +
                  "<a class='btn btn-danger btn-xs' data-confirm='Ali ste prepricani?' data-method='delete' href='/measurements/" + measurement.id + "'>Izbrisi</a>";
              trHTML += '</tr></tbody>';
            });
            $('#show-data').append(trHTML);
            var new_button = $("<a class='btn btn-info add-new-button' href='/measurements/new'>Dodaj meritev</a>");
            $('.profile-content').append(new_button);
          }
        });
      }


    }

  </script>
<div class="show-table">

</div>


    <!--  ActiveRecord::Base.connection.tables,  -->

<% end %>