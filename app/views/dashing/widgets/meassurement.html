<div class="container">
    <input id="expand-measurement" type="image" height="23px" width="23px" onclick="expandMeasurements()" title="Razširi meritve" src="/assets/expand.png" />
    <div data-bind="title" class="title"></div>
    <br />
    <select id="measurement-select">
        <option disabled selected value> -- izberite meritev -- </option>
        <option value="glukoza">Glukoza</option>
        <option value="srce">Srce</option>
        <option value="temperatura">Telesna temperatura</option>
        <option value="teža">Teža</option>
    </select>
    <br />
    <table id="measurement-table">

    </table>
</div>

<script>
    var glucose=$("#measurement").data("glucose");
    var heart=$("#measurement").data("heart");
    var temperature=$("#measurement").data("temperature");
    var weight=$("#measurement").data("weight");
    var content="";
    var limitMeasurement=8;

    //sprememba izbira prikazane meritve na dashbordu
    $("#measurement-select").change(function() {
        content="";
        switch($("#measurement-select  option:selected").val()){
            case "glukoza":
                content+='<tr><th>Datum</th><th>Čas</th><th>[mmol/l]</th></tr>';
                for(i=0;i<Math.min(limitMeasurement,glucose.length);i++)
                    content+='<tr><td>'+glucose[i]["date"].substring(0,10)+'</td><td>'+glucose[i]["date"].substring(11,16)+'</td><td>'+glucose[i]["glucose"]+'</td></tr>';
                $("#measurement-table").html(content)
                break;
            case "srce":
                content+='<tr><th>Datum</th><th>Čas</th><th>Krvni pritisk</th><th>BPM</th></tr>';
                for(i=0;i<Math.min(limitMeasurement,heart.length);i++)
                    content+='<tr><td>'+heart[i]["date"].substring(0,10)+'</td><td>'+heart[i]["date"].substring(11,16)+'</td><td>'+heart[i]["systolic"]+"/"+heart[i]["diastolic"]+'</td><td>'+heart[i]["BPM"]+'</td></tr>';
                $("#measurement-table").html(content)
                break;
            case "temperatura":
                content+='<tr><th>Datum</th><th>Čas</th><th>[°C]</th></tr>';
                for(i=0;i<Math.min(limitMeasurement,temperature.length);i++)
                    content+='<tr><td>'+temperature[i]["date"].substring(0,10)+'</td><td>'+temperature[i]["date"].substring(11,16)+'</td><td>'+temperature[i]["temperature"]+'</td></tr>';
                $("#measurement-table").html(content)
                break;
            case "teža":
                content+='<tr><th>Datum</th><th>Čas</th><th>[kg]</th></tr>';
                for(i=0;i<Math.min(limitMeasurement,weight.length);i++)
                    content+='<tr><td>'+weight[i]["date"].substring(0,10)+'</td><td>'+weight[i]["date"].substring(11,16)+'</td><td>'+weight[i]["weight"]+'</td></tr>';
                $("#measurement-table").html(content)
                break;
        }

    });


    //prikaz vseh meritev
    function expandMeasurements(){
        $("#lightbox").show();
        $('html').css('overflow','hidden');
        $("#content").html("");
        $("#content").css("min-height","0%");
        $("#expand-view").css("min-height","100%");
        $("#expand-view").css("background-color","#005e84");
        $("#expand-view").html('<div><h1>Meritve</h1><br />' +
                '<select id="measurement-select-extend" >'+
                    '<option disabled selected value> -- izberite meritev -- </option>'+
                    '<option value="glukoza">Glukoza</option>'+
                    '<option value="srce">Srce</option>'+
                    '<option value="temperatura">Telesna temperatura</option>'+
                    '<option value="teža">Teža</option>'+
                '</select> <br><br>' +
                '<table id="measurement-table-extend">'+
                '</table>'+
                '</div>');

        $("#measurement-select-extend").change(function() {
            content="";
            switch($("#measurement-select-extend  option:selected").val()){
                case "glukoza":
                    content+='<tr><th>Datum</th><th>Čas</th><th>[mmol/l]</th></tr>';
                    for(i=0;i<glucose.length;i++)
                        content+='<tr><td>'+glucose[i]["date"].substring(0,10)+'</td><td>'+glucose[i]["date"].substring(11,16)+'</td><td>'+glucose[i]["glucose"]+'</td></tr>';
                    $("#measurement-table-extend").html(content)
                    break;
                case "srce":
                    content+='<tr><th>Datum</th><th>Čas</th><th>Krvni pritisk</th><th>BPM</th></tr>';
                    for(i=0;i<heart.length;i++)
                        content+='<tr><td>'+heart[i]["date"].substring(0,10)+'</td><td>'+heart[i]["date"].substring(11,16)+'</td><td>'+heart[i]["systolic"]+"/"+heart[i]["diastolic"]+'</td><td>'+heart[i]["BPM"]+'</td></tr>';
                    $("#measurement-table-extend").html(content)
                    break;
                case "temperatura":
                    content+='<tr><th>Datum</th><th>Čas</th><th>[°C]</th></tr>';
                    for(i=0;i<temperature.length;i++)
                        content+='<tr><td>'+temperature[i]["date"].substring(0,10)+'</td><td>'+temperature[i]["date"].substring(11,16)+'</td><td>'+temperature[i]["temperature"]+'</td></tr>';
                    $("#measurement-table-extend").html(content)
                    break;
                case "teža":
                    content+='<tr><th>Datum</th><th>Čas</th><th>[kg]</th></tr>';
                    for(i=0;i<weight.length;i++)
                        content+='<tr><td>'+weight[i]["date"].substring(0,10)+'</td><td>'+weight[i]["date"].substring(11,16)+'</td><td>'+weight[i]["weight"]+'</td></tr>';
                    $("#measurement-table-extend").html(content)
                    break;
            }

            if($('#measurement-select-extend').find(":selected").val()!="")
                $("#measurement-select").val($('#measurement-select-extend').find(":selected").val()).change();


        });
        $("#measurement-select-extend").val($('#measurement-select').find(":selected").val()).change();

    }


</script>
